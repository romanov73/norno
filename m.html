<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Нормоконтроль пояснительных записок по ВКР магистратуры</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2em;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .degree-badge {
            background: #e74c3c;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }
        
        .section {
            margin-bottom: 30px;
            border: 1px solid #e1e1e1;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .section-header {
            background: #9b59b6;
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .section-header:hover {
            background: #8e44ad;
        }
        
        .section-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        .section.expanded .section-content {
            max-height: 5000px;
            padding: 20px;
        }
        
        .checklist-item {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        
        .checklist-item:hover {
            background-color: #f9f9f9;
        }
        
        .item-content {
            display: flex;
            align-items: flex-start;
            width: 100%;
        }
        
        .checklist-item input[type="checkbox"] {
            margin-right: 12px;
            margin-top: 3px;
            transform: scale(1.2);
        }
        
        .item-text {
            flex-grow: 1;
        }
        
        .toggle-notes {
            background: none;
            border: 1px solid #9b59b6;
            color: #9b59b6;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
            margin-left: 10px;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .toggle-notes:hover {
            background: #9b59b6;
            color: white;
        }
        
        .notes-container {
            margin-top: 10px;
            width: 100%;
            display: none;
        }
        
        .notes-container textarea {
            width: 100%;
            height: 80px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            font-family: inherit;
        }
        
        .progress-container {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .progress-bar {
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #2ecc71;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-100 {
            background: #27ae60 !important;
        }
        
        .progress-text {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .report-container {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .report-success {
            background: #d4edda !important;
            border-left: 4px solid #28a745 !important;
        }
        
        .report-container h2 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .report-container textarea {
            width: 100%;
            height: 200px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            font-family: inherit;
            font-size: 1em;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #9b59b6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #8e44ad;
        }
        
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .summary {
            margin-top: 20px;
            padding: 15px;
            background: #fff8e1;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }
        
        .item-counter {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-left: 10px;
        }
        
        .magister-note {
            background: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 4px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Нормоконтроль пояснительных записок по ВКР магистратуры</h1>
        <div class="subtitle">Проверка магистерской диссертации по методическим указаниям УлГТУ</div>
        
        <div class="progress-container">
            <div class="progress-text">Общий прогресс: <span id="progress-percent">0%</span></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div>Выполнено: <span id="completed-count">0</span> из <span id="total-count">0</span> пунктов</div>
        </div>
        
        <div id="checklist-container">
            <!-- Секции будут сгенерированы через JavaScript -->
        </div>
        
        <div class="report-container">
            <h2>Отчет по проверке</h2>
            <textarea id="report-text" placeholder="Здесь будет автоматически сформирован отчет о проверке..."></textarea>
            <div class="controls">
                <button id="generate-report" class="btn-primary">Сформировать отчет</button>
                <button id="copy-report" class="btn-success">Копировать отчет</button>
                <button id="reset-checklist" class="btn-danger">Сбросить чек-лист</button>
            </div>
        </div>
    </div>

    <script>
        // Данные чек-листа для магистратуры
        const checklistData = [
            {
                title: "1. Общие требования к документу",
                items: [
                    "Формат и поля: Лист А4. Поля: левое — 30 мм, правое — 10 мм, верхнее и нижнее — 20 мм",
                    "Шрифт и интервал: Основной текст — Times New Roman, 14 пт, или Arial, 12 пт. Межстрочный интервал — 1,5",
                    "Цвет: Черный",
                    "Нумерация страниц: Сквозная, арабскими цифрами, внизу по центру без точек и черточек. Титульный лист включается в нумерацию, но номер на нем не ставится",
                    "Объем работы: 60-80 страниц без учета приложений"
                ]
            },
            {
                title: "2. Структурные элементы (порядок и наличие)",
                items: [
                    "Титульный лист (Приложение А) с данными о рецензенте",
                    "Задание на магистерскую диссертацию (Приложение Б)",
                    "Реферат (аннотация)",
                    "Пояснительная записка, содержащая: Содержание (оглавление)",
                    "Пояснительная записка, содержащая: Перечень используемых условных обозначений, сокращений, терминов",
                    "Пояснительная записка, содержащая: Введение с обоснованием научной новизны",
                    "Пояснительная записка, содержащая: Основная часть с научным обзором, собственными методами, программной реализацией и экспериментами",
                    "Пояснительная записка, содержащая: Заключение",
                    "Пояснительная записка, содержащая: Список использованных источников (не менее 30)",
                    "Пояснительная записка, содержащая: Приложения",
                    "Последний лист с заявлением о самостоятельности работы (Приложение Е)",
                    "Вложены, но не подшиты: Отзыв руководителя (Приложение В)",
                    "Вложены, но не подшиты: Отзыв рецензента (Приложение Г)",
                    "Вложены, но не подшиты: Первый лист антиплагиата с подписью автора",
                    "Вложены, но не подшиты: Заявление о самостоятельности работы (Приложение Д)",
                    "Вложены, но не подшиты: Отзыв от специалиста-практика (при наличии)",
                    "Вложены, но не подшиты: Акт о внедрении (при наличии)"
                ]
            },
            {
                title: "3. Оформление разделов и заголовков",
                items: [
                    "Новая страница: Каждый структурный элемент (введение, глава, заключение, список литературы, приложение) начинается с новой страницы",
                    "Нумерация разделов: Арабские цифры с точками (например, 1.2.1). Точка в конце номера не ставится",
                    "Заголовки: Пишутся с абзацного отступа, без точки в конце, с прописной буквы. Переносы слов не допускаются",
                    "Расстояния: Между заголовком и текстом — 1 пустая строка (при интервале 1,5). Между заголовком главы и параграфа — 2 интервала (8 мм)",
                    "Абзацный отступ: Равен 5 знакам (12,5–17 мм)"
                ]
            },
            {
                title: "4. Оформление текста",
                items: [
                    "Перечисления: Перед каждым элементом — дефис, строчная буква или знак ●. Детализация — арабскими цифрами со скобкой",
                    "Числа: До десяти без единиц измерения — словами, после десяти и с единицами — цифрами",
                    "Сокращения: Стандартные сокращения (и т.д., и т.п., см., рис., табл.). Запрещенные сокращения (т.к., т.н., т.о.) не используются",
                    "Научная терминология: Корректное использование принятой научной терминологии",
                    "Стиль изложения: Научный стиль, логическая последовательность, убедительная аргументация"
                ]
            },
            {
                title: "5. Специальные элементы",
                items: [
                    "Формулы: Выделены в отдельную строку, с пустой строкой до и после. Нумерация сквозная арабскими цифрами в круглых скобках справа",
                    "Таблицы: Нумерация сквозная или в пределах раздела. Над таблицей слева: «Таблица X -- Название» (без точки в конце)",
                    "Рисунки: Нумерация сквозная или в пределах раздела. Под рисунком по центру: «Рисунок X -- Название» (без точки в конце)",
                    "Ссылки: На все таблицы, рисунки и приложения в тексте должны быть ссылки"
                ]
            },
            {
                title: "6. Список литературы",
                items: [
                    "Количество: Не менее 30 источников",
                    "Ссылки в тексте: На более чем 80% источников из списка должна быть хотя бы одна ссылка в тексте",
                    "Порядок: Нормативные акты -> Книги -> Периодика -> Локальные электронные ресурсы -> Интернет-источники",
                    "Оформление записей: По ГОСТ Р 7.0.100-2018. Области описания разделяются точкой и тире (. - )",
                    "Алфавитный порядок: В каждом разделе сначала на русском языке, потом на иностранных"
                ]
            },
            {
                title: "7. Приложения",
                items: [
                    "Наличие: Обязателен листинг программы. Приложения есть",
                    "Ссылки: В тексте обязательны ссылки на каждое приложение",
                    "Оформление: Каждое приложение начинается с новой страницы с надписью «ПРИЛОЖЕНИЕ X» по центру сверху",
                    "Обозначение: Заглавными русскими (кроме Ё, З, Й, О, Ч, Ь, Ы, Ъ) или латинскими (кроме I и O) буквами",
                    "Нумерация: Страницы приложений входят в общую сквозную нумерацию работы"
                ]
            },
            {
                title: "8. Научная составляющая (особое внимание для магистров)",
                items: [
                    "Научная новизна: Четко сформулирована и обоснована во введении",
                    "Научный обзор: Представлен анализ существующих методов и решений в проблемной области",
                    "Собственные разработки: Детально представлены собственные методы, алгоритмы с выделением научной новизны",
                    "Сравнительный анализ: Проведено сравнение предлагаемых решений с существующими аналогами",
                    "Экспериментальная часть: Представлены качественные эксперименты, подтверждающие достижение целей",
                    "Апробация результатов: При наличии - указаны публикации, выступления на конференциях"
                ]
            },
            {
                title: "9. Нормоконтроль (проверка перед сдачей)",
                items: [
                    "Комплектность: Все документы присутствуют, включая отзыв рецензента",
                    "Тема: Соответствует утвержденной приказом",
                    "Обозначение ВКР: Корректно оформлено (например, МД – УлГТУ – 09.04.03 – 01/0180 – 2024)",
                    "Структура ПЗ: Полностью соответствует методическим указаниям для магистров",
                    "Подписи: На титульных листах присутствуют подписи студента, руководителя, рецензента и нормоконтролера"
                ]
            }
        ];

        // Глобальные переменные
        let checklistState = {};
        let notesState = {};

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            initializeChecklist();
            loadSavedState();
            updateProgress();
            
            // Обработчики событий
            document.getElementById('generate-report').addEventListener('click', generateReport);
            document.getElementById('copy-report').addEventListener('click', copyReport);
            document.getElementById('reset-checklist').addEventListener('click', resetChecklist);
        });

        // Инициализация чек-листа
        function initializeChecklist() {
            const container = document.getElementById('checklist-container');
            let totalItems = 0;
            
            checklistData.forEach((section, sectionIndex) => {
                const sectionElement = document.createElement('div');
                sectionElement.className = 'section';
                sectionElement.id = `section-${sectionIndex}`;
                
                // Заголовок секции
                const header = document.createElement('div');
                header.className = 'section-header';
                header.innerHTML = `
                    ${section.title}
                    <span class="item-counter">${section.items.length} пунктов</span>
                `;
                header.addEventListener('click', () => toggleSection(sectionIndex));
                
                // Контент секции
                const content = document.createElement('div');
                content.className = 'section-content';
                
                // Добавляем специальные заметки для магистров в определенные секции
                if (sectionIndex === 1) {
                    const note = document.createElement('div');
                    note.className = 'magister-note';
                    note.innerHTML = '<strong>Для магистров:</strong> Обязательно наличие отзыва рецензента в отличие от бакалаврских работ';
                    content.appendChild(note);
                }
                
                if (sectionIndex === 5) {
                    const note = document.createElement('div');
                    note.className = 'magister-note';
                    note.innerHTML = '<strong>Для магистров:</strong> Требуется не менее 30 источников литературы (для бакалавров - 20)';
                    content.appendChild(note);
                }
                
                if (sectionIndex === 7) {
                    const note = document.createElement('div');
                    note.className = 'magister-note';
                    note.innerHTML = '<strong>Для магистров:</strong> Научная новизна - обязательное требование для магистерской диссертации';
                    content.appendChild(note);
                }
                
                section.items.forEach((item, itemIndex) => {
                    const itemId = `item-${sectionIndex}-${itemIndex}`;
                    totalItems++;
                    
                    const itemElement = document.createElement('div');
                    itemElement.className = 'checklist-item';
                    
                    itemElement.innerHTML = `
                        <div class="item-content">
                            <input type="checkbox" id="${itemId}">
                            <div class="item-text">${item}</div>
                            <button class="toggle-notes" data-item="${itemId}">Заметки</button>
                        </div>
                        <div class="notes-container" id="notes-${itemId}">
                            <textarea placeholder="Добавьте замечания по этому пункту..."></textarea>
                        </div>
                    `;
                    
                    content.appendChild(itemElement);
                    
                    // Инициализация состояния
                    checklistState[itemId] = false;
                    notesState[itemId] = '';
                    
                    // Обработчики для чекбоксов
                    const checkbox = itemElement.querySelector('input[type="checkbox"]');
                    checkbox.addEventListener('change', function() {
                        checklistState[itemId] = this.checked;
                        saveState();
                        updateProgress();
                    });
                    
                    // Обработчики для кнопок заметок
                    const notesButton = itemElement.querySelector('.toggle-notes');
                    notesButton.addEventListener('click', function() {
                        const notesContainer = document.getElementById(`notes-${itemId}`);
                        const isVisible = notesContainer.style.display === 'block';
                        notesContainer.style.display = isVisible ? 'none' : 'block';
                        this.textContent = isVisible ? 'Заметки' : 'Скрыть';
                    });
                    
                    // Обработчики для текстовых полей заметок
                    const textarea = itemElement.querySelector('textarea');
                    textarea.addEventListener('input', function() {
                        notesState[itemId] = this.value;
                        saveState();
                    });
                });
                
                sectionElement.appendChild(header);
                sectionElement.appendChild(content);
                container.appendChild(sectionElement);
            });
            
            document.getElementById('total-count').textContent = totalItems;
            
            // Раскрываем первую секцию по умолчанию
            toggleSection(0);
        }

        // Переключение видимости секции
        function toggleSection(sectionIndex) {
            const section = document.getElementById(`section-${sectionIndex}`);
            section.classList.toggle('expanded');
        }

        // Обновление прогресса
        function updateProgress() {
            const totalItems = Object.keys(checklistState).length;
            const completedItems = Object.values(checklistState).filter(Boolean).length;
            const progressPercent = totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0;
            
            document.getElementById('completed-count').textContent = completedItems;
            document.getElementById('progress-percent').textContent = `${progressPercent}%`;
            document.getElementById('progress-fill').style.width = `${progressPercent}%`;
            
            // Добавляем специальный класс для 100% выполнения
            const progressFill = document.getElementById('progress-fill');
            if (progressPercent === 100) {
                progressFill.classList.add('progress-100');
            } else {
                progressFill.classList.remove('progress-100');
            }
        }

        // Сохранение состояния в localStorage
        function saveState() {
            localStorage.setItem('magister_checklistState', JSON.stringify(checklistState));
            localStorage.setItem('magister_notesState', JSON.stringify(notesState));
        }

        // Загрузка состояния из localStorage
        function loadSavedState() {
            const savedChecklistState = localStorage.getItem('magister_checklistState');
            const savedNotesState = localStorage.getItem('magister_notesState');
            
            if (savedChecklistState) {
                checklistState = JSON.parse(savedChecklistState);
                
                // Обновление чекбоксов
                Object.keys(checklistState).forEach(itemId => {
                    const checkbox = document.getElementById(itemId);
                    if (checkbox) {
                        checkbox.checked = checklistState[itemId];
                    }
                });
            }
            
            if (savedNotesState) {
                notesState = JSON.parse(savedNotesState);
                
                // Обновление текстовых полей
                Object.keys(notesState).forEach(itemId => {
                    const textarea = document.querySelector(`#notes-${itemId} textarea`);
                    if (textarea) {
                        textarea.value = notesState[itemId];
                    }
                });
            }
        }

        // Сброс чек-листа
        function resetChecklist() {
            if (confirm('Вы уверены, что хотите сбросить весь чек-лист? Все данные будут удалены.')) {
                localStorage.removeItem('magister_checklistState');
                localStorage.removeItem('magister_notesState');
                
                // Сброс чекбоксов
                Object.keys(checklistState).forEach(itemId => {
                    checklistState[itemId] = false;
                    const checkbox = document.getElementById(itemId);
                    if (checkbox) {
                        checkbox.checked = false;
                    }
                });
                
                // Сброс заметок
                Object.keys(notesState).forEach(itemId => {
                    notesState[itemId] = '';
                    const textarea = document.querySelector(`#notes-${itemId} textarea`);
                    if (textarea) {
                        textarea.value = '';
                    }
                });
                
                updateProgress();
                document.getElementById('report-text').value = '';
            }
        }

        // Генерация отчета
        function generateReport() {
            const completedItems = Object.values(checklistState).filter(Boolean).length;
            const totalItems = Object.keys(checklistState).length;
            const progressPercent = Math.round((completedItems / totalItems) * 100);
            
            // Если все пункты выполнены (100%) - выводим краткое сообщение
            if (progressPercent === 100) {
                let report = `ОТЧЕТ ПРОВЕРКИ МАГИСТЕРСКОЙ ДИССЕРТАЦИИ\n`;
                report += `Дата проверки: ${new Date().toLocaleDateString('ru-RU')}\n\n`;
                report += `✅ НОРМОКОНТРОЛЬ ПРОЙДЕН УСПЕШНО!\n\n`;
                report += `Все требования к оформлению магистерской диссертации выполнены.\n`;
                report += `Работа соответствует методическим указаниям УлГТУ для магистров.\n`;
                report += `Научная составляющая и оформление работы соответствуют требованиям.\n`;
                report += `Рекомендуется к допуску на защиту.\n\n`;
                report += `Выполнено: ${completedItems} из ${totalItems} пунктов (100%)`;
                
                document.getElementById('report-text').value = report;
                return;
            }
            
            // Стандартный отчет для случаев, когда выполнено не все
            let report = `ОТЧЕТ ПРОВЕРКИ МАГИСТЕРСКОЙ ДИССЕРТАЦИИ\n`;
            report += `Дата проверки: ${new Date().toLocaleDateString('ru-RU')}\n`;
            report += `Общий прогресс: ${progressPercent}% (${completedItems} из ${totalItems} пунктов)\n\n`;
            
            // Добавляем выполненные пункты
            report += `ВЫПОЛНЕННЫЕ ПУНКТЫ:\n`;
            let hasCompleted = false;
            
            checklistData.forEach((section, sectionIndex) => {
                let sectionCompleted = false;
                let sectionReport = '';
                
                section.items.forEach((item, itemIndex) => {
                    const itemId = `item-${sectionIndex}-${itemIndex}`;
                    if (checklistState[itemId]) {
                        sectionCompleted = true;
                        hasCompleted = true;
                        sectionReport += `✓ ${item}\n`;
                        
                        // Добавляем заметки, если они есть
                        if (notesState[itemId] && notesState[itemId].trim() !== '') {
                            sectionReport += `   Заметки: ${notesState[itemId]}\n`;
                        }
                    }
                });
                
                if (sectionCompleted) {
                    report += `\n${section.title}:\n${sectionReport}`;
                }
            });
            
            if (!hasCompleted) {
                report += `Нет выполненных пунктов\n`;
            }
            
            // Добавляем невыполненные пункты
            report += `\nНЕВЫПОЛНЕННЫЕ ПУНКТЫ (требуют внимания):\n`;
            let hasIncomplete = false;
            
            checklistData.forEach((section, sectionIndex) => {
                let sectionIncomplete = false;
                let sectionReport = '';
                
                section.items.forEach((item, itemIndex) => {
                    const itemId = `item-${sectionIndex}-${itemIndex}`;
                    if (!checklistState[itemId]) {
                        sectionIncomplete = true;
                        hasIncomplete = true;
                        sectionReport += `✗ ${item}\n`;
                        
                        // Добавляем заметки, если они есть
                        if (notesState[itemId] && notesState[itemId].trim() !== '') {
                            sectionReport += `   Заметки: ${notesState[itemId]}\n`;
                        }
                    }
                });
                
                if (sectionIncomplete) {
                    report += `\n${section.title}:\n${sectionReport}`;
                }
            });
            
            if (!hasIncomplete) {
                report += `Все пункты выполнены!\n`;
            }
            
            // Добавляем рекомендации
            report += `\nРЕКОМЕНДАЦИИ ДЛЯ МАГИСТЕРСКОЙ ДИССЕРТАЦИИ:\n`;
            if (progressPercent < 50) {
                report += `- Необходимо уделить больше внимания оформлению работы\n`;
                report += `- Особое внимание следует обратить на научную составляющую и новизну работы\n`;
                report += `- Рекомендуется начать с основных структурных элементов\n`;
            } else if (progressPercent < 80) {
                report += `- Работа близка к завершению, но требуется доработка некоторых пунктов\n`;
                report += `- Проверьте оформление специальных элементов (формулы, таблицы, рисунки)\n`;
                report += `- Убедитесь в наличии и корректности отзыва рецензента\n`;
            } else if (progressPercent < 100) {
                report += `- Работа оформлена хорошо, остались незначительные недочеты\n`;
                report += `- Проведите финальную проверку научной составляющей перед сдачей\n`;
                report += `- Убедитесь, что научная новизна четко сформулирована и обоснована\n`;
            }
            
            document.getElementById('report-text').value = report;
        }

        // Копирование отчета в буфер обмена
        function copyReport() {
            const reportTextarea = document.getElementById('report-text');
            reportTextarea.select();
            document.execCommand('copy');
            alert('Отчет скопирован в буфер обмена!');
        }
    </script>
</body>
</html>